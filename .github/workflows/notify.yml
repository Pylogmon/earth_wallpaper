name: Notify
on: 
  issues:
    types: opened
  issue_comment:
    types: created
  pull_request_target:
    types: opened
jobs:
  notify:
    name: Notify
    runs-on: ubuntu-latest
    steps:
      - name: get issue_comment content
        if: ${{ git.event.issues_comment }}
        run: |
            echo "CONTENT=${{ github.event.comment.body }}" >> $GITHUB_ENV
      - name: get issues content
        if: ${{ github.event.issues }}
        run: |
          echo "CONTENT=${{ github.event.changes.old_issue.body }}" >> $GITHUB_ENV
      - name: get pull_request content
        if: ${{ github.event.pull_request_target }}
        run: |
          echo "CONTENT=${{ github.event.pull_request.title }}" >> $GITHUB_ENV
      # å‘é€åˆ°Telegram
      - uses: colutius/Telegram-Msg@main
        with:
          token: ${{ secrets.TELEGRAM_TOKEN }}
          chatid: ${{ secrets.TELEGRAM_TO }}
          button: true
          button_name: ğŸ‘€åœ¨GithubæŸ¥çœ‹ğŸ‘€
          button_url: https://github.com/ambition-echo/earth_wallpaper
          message: |
            ğŸŒŸå®~

            earth-wallpaper ä»“åº“æœ‰æ–°çš„åŠ¨æ€ã€‚
            
            å‘èµ·è€…: ${{ github.event.sender.login }}
            
            äº‹ä»¶ç±»å‹: ${{ github.event_name }}
            
            å†…å®¹: ${{ env.CONTENT }}
